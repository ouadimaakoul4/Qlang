<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QLang ‚Äî Biblioth√®que des Lois Universelles</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
            color: white;
            line-height: 1.6;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
        }
        .law-card {
            background: white;
            color: #333;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 5px solid #4a69bd;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .debug-info {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß QLang ‚Äî Version Debug</h1>
        <p>Apprenez √† corriger les bugs avec moi !</p>
        
        <button onclick="debugLois()">üêõ Tester le Debug</button>
        <button onclick="genererLoisCorrigees()">‚úÖ G√©n√©rer Lois Corrig√©es</button>
        <button onclick="montrerProbleme()">‚ùå Voir le Probl√®me</button>
        
        <div id="response">
            <p>Cliquez sur les boutons pour voir les diff√©rences.</p>
        </div>
    </div>

    <script>
        // ==================== EXPLICATION DU BUG ====================

        function montrerProbleme() {
            // EXEMPLE DU PROBL√àME
            const loiAvecBug = {
                nom: "Loi de Newton",
                enonce: "F = ma"  // ‚ùå MAUVAIS: "enonce" sans accent
            };

            const loiCorrecte = {
                nom: "Loi de Newton", 
                √©nonc√©: "F = ma"  // ‚úÖ BON: "√©nonc√©" avec accent
            };

            let html = `<h2>üîç Analyse du Bug</h2>`;
            
            html += `<div class="law-card">
                <h3>‚ùå LOI AVEC BUG</h3>
                <div class="debug-info">
                    const loi = {<br>
                    &nbsp;&nbsp;nom: "Loi de Newton",<br>
                    &nbsp;&nbsp;<span style="color:red">enonce</span>: "F = ma"  // SANS accent<br>
                    };
                </div>
                <p><strong>R√©sultat :</strong> √ânonc√© : ${loiAvecBug.√©nonc√© || "UNDEFINED !"}</p>
                <p><em>JavaScript cherche "√©nonc√©" mais trouve "enonce"</em></p>
            </div>`;

            html += `<div class="law-card">
                <h3>‚úÖ LOI CORRECTE</h3>
                <div class="debug-info">
                    const loi = {<br>
                    &nbsp;&nbsp;nom: "Loi de Newton",<br>
                    &nbsp;&nbsp;<span style="color:green">√©nonc√©</span>: "F = ma"  // AVEC accent<br>
                    };
                </div>
                <p><strong>R√©sultat :</strong> √ânonc√© : ${loiCorrecte.√©nonc√© || "UNDEFINED !"}</p>
                <p><em>JavaScript trouve bien "√©nonc√©"</em></p>
            </div>`;

            html += `<div class="law-card">
                <h3>üéØ SOLUTION</h3>
                <p><strong>Dans TOUT le code, il faut utiliser :</strong></p>
                <div class="debug-info">
                    √©nonc√©: "texte"  // ‚úÖ TOUJOURS avec accent aigu<br>
                    √©nonc√©_latex: "formule"  // ‚úÖ idem pour latex
                </div>
                <p><strong>Et JAMAIS :</strong></p>
                <div class="debug-info">
                    enonce: "texte"  // ‚ùå sans accent<br>
                    enonce_latex: "formule"  // ‚ùå sans accent
                </div>
            </div>`;

            document.getElementById('response').innerHTML = html;
        }

        // ==================== VERSION CORRIG√âE ====================

        function genererLoisCorrigees() {
            const nouvellesLois = {};
            
            // CORRECTION : TOUJOURS utiliser "√©nonc√©" et "√©nonc√©_latex"
            for (let i = 0; i < 5; i++) {
                const id = 'corrigee_' + i;
                nouvellesLois[id] = {
                    nom: `Loi Corrig√©e ${i + 1}`,
                    categorie: "physique_fondamentale",
                    domaines: ["physique", "fondamental"],
                    
                    // ‚úÖ CORRECT - avec accent
                    √©nonc√©: `La propri√©t√© ${i} d'un syst√®me reste constante.`,
                    
                    // ‚úÖ CORRECT - avec accent  
                    √©nonc√©_latex: `E_${i} = k \\log W`,
                    
                    implications: ["Cons√©quence importante", "Application universelle"],
                    confiance: 0.9,
                    date_decouverte: "2024",
                    decouvreurs: ["√âquipe Debug"]
                };
            }

            let html = `<h2>‚úÖ Lois G√©n√©r√©es CORRECTEMENT</h2>`;
            
            Object.values(nouvellesLois).forEach(loi => {
                html += `<div class="law-card">
                    <h3>${loi.nom}</h3>
                    <p><strong>√ânonc√© :</strong> ${loi.√©nonc√©}</p>
                    <p><strong>Formule :</strong> ${loi.√©nonc√©_latex}</p>
                    <div class="debug-info" style="color:green;">
                        ‚úÖ PAS de "undefined" - tout fonctionne !
                    </div>
                </div>`;
            });

            html += `<div class="law-card">
                <h3>üß† Ce que vous devez retenir :</h3>
                <p><strong>R√®gle d'or :</strong> Toujours utiliser le m√™me nom de propri√©t√©</p>
                <p><strong>Dans votre cas :</strong> "√©nonc√©" avec accent dans TOUT le code</p>
                <p><strong>V√©rification :</strong> Utilisez Ctrl+F pour chercher "enonce" (sans accent) et remplacez par "√©nonc√©"</p>
            </div>`;

            document.getElementById('response').innerHTML = html;
        }

        // ==================== OUTIL DE DEBUG ====================

        function debugLois() {
            // Cr√©ons une loi avec le bug pour d√©montrer
            const loiTest = {
                nom: "Loi Test",
                // ‚ùå Version avec bug
                enonce: "Ceci est un √©nonc√©",
                enonce_latex: "E = mc^2",
                // ‚úÖ Version correcte  
                √©nonc√©: "Ceci est un √©nonc√© correct",
                √©nonc√©_latex: "E = mc^2"
            };

            let html = `<h2>üîß Outil de Debug</h2>`;
            
            html += `<div class="law-card">
                <h3>Test de la Loi</h3>
                <div class="debug-info">
                    // Regardons ce que contient la loi :<br>
                    console.log(loiTest);
                </div>
                
                <table style="width:100%; border-collapse: collapse; margin: 15px 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding:10px; border:1px solid #ddd;">Propri√©t√©</th>
                        <th style="padding:10px; border:1px solid #ddd;">Valeur</th>
                        <th style="padding:10px; border:1px solid #ddd;">R√©sultat</th>
                    </tr>
                    <tr>
                        <td style="padding:10px; border:1px solid #ddd;">loiTest.enonce</td>
                        <td style="padding:10px; border:1px solid #ddd;">${loiTest.enonce}</td>
                        <td style="padding:10px; border:1px solid #ddd; color:red;">‚ùå Mauvais nom</td>
                    </tr>
                    <tr>
                        <td style="padding:10px; border:1px solid #ddd;">loiTest.√©nonc√©</td>
                        <td style="padding:10px; border:1px solid #ddd;">${loiTest.√©nonc√©}</td>
                        <td style="padding:10px; border:1px solid #ddd; color:green;">‚úÖ Bon nom</td>
                    </tr>
                    <tr>
                        <td style="padding:10px; border:1px solid #ddd;">loiTest.enonce_latex</td>
                        <td style="padding:10px; border:1px solid #ddd;">${loiTest.enonce_latex}</td>
                        <td style="padding:10px; border:1px solid #ddd; color:red;">‚ùå Mauvais nom</td>
                    </tr>
                    <tr>
                        <td style="padding:10px; border:1px solid #ddd;">loiTest.√©nonc√©_latex</td>
                        <td style="padding:10px; border:1px solid #ddd;">${loiTest.√©nonc√©_latex}</td>
                        <td style="padding:10px; border:1px solid #ddd; color:green;">‚úÖ Bon nom</td>
                    </tr>
                </table>
            </div>`;

            html += `<div class="law-card">
                <h3>üéØ Comment corriger dans VOTRE code :</h3>
                <p><strong>√âtape 1 :</strong> Cherchez "enonce" (sans accent) dans tout le code</p>
                <p><strong>√âtape 2 :</strong> Remplacez TOUS les "enonce" par "√©nonc√©"</p>
                <p><strong>√âtape 3 :</strong> Remplacez TOUS les "enonce_latex" par "√©nonc√©_latex"</p>
                <p><strong>√âtape 4 :</strong> Testez √† nouveau</p>
                
                <div class="debug-info">
                    // AVANT (bug) :<br>
                    enonce: "texte"<br>
                    enonce_latex: "formule"<br><br>
                    
                    // APR√àS (corrig√©) :<br>
                    √©nonc√©: "texte"<br>
                    √©nonc√©_latex: "formule"
                </div>
            </div>`;

            document.getElementById('response').innerHTML = html;
        }

        // ==================== CORRECTION DU G√âN√âRATEUR ORIGINAL ====================

        function corrigerGenerateurOriginal() {
            // VOICI CE QU'IL FAUT CHANGER DANS VOTRE CODE ORIGINAL :
            
            // ‚ùå AVANT (dans le g√©n√©rateur) :
            const loiBug = {
                nom: "Loi Bug",
                enonce: "texte",           // ‚ùå SANS accent
                enonce_latex: "formule"    // ‚ùå SANS accent
            };
            
            // ‚úÖ APR√àS (corrig√©) :
            const loiFix = {
                nom: "Loi Fix", 
                √©nonc√©: "texte",           // ‚úÖ AVEC accent
                √©nonc√©_latex: "formule"    // ‚úÖ AVEC accent
            };
            
            alert("Regardez les commentaires dans le code pour voir les corrections !");
        }
    </script>
</body>
</html>
